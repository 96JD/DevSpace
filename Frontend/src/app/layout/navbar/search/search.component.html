<div class="relative z-10" aria-modal="true">
	<div
		@opacity
		*ngIf="isAnimationEnterTriggered"
		class="fixed inset-0 bg-gray-500 bg-opacity-25 transition-opacity"
	></div>
	<div id="search-palette-overlay" class="fixed inset-0 z-20 overflow-y-auto p-4 sm:p-6 md:p-20">
		<div
			@opacityScale
			*ngIf="isAnimationEnterTriggered"
			class="mx-auto max-w-xl transform divide-y divide-gray-100 overflow-hidden rounded-xl bg-white shadow-2xl ring-1 ring-black ring-opacity-5 transition-all"
		>
			<div class="relative">
				<svg
					class="pointer-events-none absolute left-4 top-3.5 h-5 w-5 text-gray-400"
					xmlns="http://www.w3.org/2000/svg"
					viewBox="0 0 20 20"
					fill="currentColor"
					aria-hidden="true"
				>
					<path
						fill-rule="evenodd"
						d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z"
						clip-rule="evenodd"
					/>
				</svg>
				<input
					id="search-palette-input"
					class="h-12 w-full border-0 bg-transparent pl-11 pr-4 text-gray-800 placeholder-gray-400 focus:ring-0 sm:text-sm"
					placeholder="Search..."
					role="combobox"
					aria-expanded="false"
					aria-controls="options"
					[(ngModel)]="rawQuery"
					(input)="onRawQueryChange()"
					(keydown)="closeSearchPalette($event)"
				/>
			</div>
			<ul
				*ngIf="filteredSearchedQuestions.length > 0 || filteredSearchedUsers.length > 0"
				id="options"
				class="max-h-80 scroll-py-10 scroll-pb-2 space-y-4 overflow-y-auto p-4 pb-2"
			>
				<li *ngIf="filteredSearchedQuestions.length > 0">
					<h2 class="text-xs font-semibold text-gray-900">Questions</h2>
					<ul class="-mx-4 mt-2 text-sm text-gray-700">
						<li
							*ngFor="let question of filteredSearchedQuestions"
							id="option-1"
							class="group flex cursor-pointer select-none items-center px-4 py-2 hover:bg-rose-600 hover:text-white"
							tabindex="-1"
						>
							<svg
								class="h-6 w-6 flex-none text-gray-400"
								xmlns="http://www.w3.org/2000/svg"
								fill="none"
								viewBox="0 0 24 24"
								stroke-width="1.5"
								stroke="currentColor"
								aria-hidden="true"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"
								/>
							</svg>
							<span class="ml-3 flex-auto truncate">{{ question.Title }}</span>
						</li>
					</ul>
				</li>
				<li *ngIf="filteredSearchedUsers.length > 0">
					<h2 class="text-xs font-semibold text-gray-900">Users</h2>
					<ul class="-mx-4 mt-2 text-sm text-gray-700">
						<li
							*ngFor="let user of filteredSearchedUsers"
							id="option-2"
							class="group flex cursor-pointer select-none items-center px-4 py-2 hover:bg-rose-600 hover:text-white"
							tabindex="-1"
						>
							<app-image classNames="h-6 w-6 flex-none rounded-full" url="{{ user.ProfilePicture }}" />
							<span class="ml-3 flex-auto truncate">{{ user.FirstName + " " + user.LastName }}</span>
						</li>
					</ul>
				</li>
			</ul>
			<div
				*ngIf="query !== '' && filteredSearchedQuestions.length === 0 && filteredSearchedUsers.length === 0"
				class="px-6 py-14 text-center text-sm sm:px-14"
			>
				<svg
					class="mx-auto h-6 w-6 text-gray-400"
					xmlns="http://www.w3.org/2000/svg"
					fill="none"
					viewBox="0 0 24 24"
					stroke-width="1.5"
					stroke="currentColor"
					aria-hidden="true"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"
					/>
				</svg>
				<p class="mt-4 font-semibold text-gray-900">No results found</p>
				<p class="mt-2 text-gray-500">We couldn't find anything with that term. Please try again.</p>
			</div>
			<div class="flex flex-wrap items-center bg-gray-50 px-4 py-2.5 text-xs text-gray-700">
				Type
				<kbd
					[ngClass]="rawQuery === '#' ? 'border-rose-600 text-rose-600' : 'border-gray-400 text-gray-900'"
					class="mx-1 flex h-5 w-5 items-center justify-center rounded border bg-white font-semibold sm:mx-2"
					>#</kbd
				>
				<span class="sm:hidden">for questions,</span
				><span class="hidden sm:inline">to access questions, and</span>
				<kbd
					[ngClass]="
						rawQuery.startsWith('<') ? 'border-rose-600 text-rose-600' : 'border-gray-400 text-gray-900'
					"
					class="mx-1 flex h-5 w-5 items-center justify-center rounded border bg-white font-semibold sm:mx-2"
					>&lt;</kbd
				>
				for users.
			</div>
		</div>
	</div>
</div>
